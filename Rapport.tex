\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{glossaries}
\makeglossaries
\usepackage{graphicx}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\author{Kevin Rivière}
\title{Rapport de Stage}

% Franchisation des commandes
\renewcommand{\contentsname}{Table des matières}
\renewcommand{\listfigurename}{Liste des figures}

% Acronymes (s'utilise avec %gls{ACRONYM})
\newacronym{SGBD}{SGBD}{système de gestion de base de données}
\newacronym{JCMS}{JCMS}{Jalios Content Management System}
\newacronym{SVN}{SVN}{Subversion}
\newacronym{JADE}{JADE}{JAlios Delivery Engine}

\begin{document}
\maketitle
\thispagestyle{empty}
\setcounter{page}{0}
\newpage

\tableofcontents
\thispagestyle{empty}
\setcounter{page}{0}
\newpage

\section{Introduction}
Dans le cadre de mes études en école d'ingénieur à l'EPITA, un stage devait être effectuer en entreprise afin de valider les acquis de la première année du cycle ingénieur. Le stage devait être un stage de développement. Mes recherches se sont basées sur deux grand thèmes différents : 
\begin{itemize}
\item le développement d'applications en C/C++ ou en Java,
\item le développement d'application web en PHP ou en Java.
\end{itemize}\par
Ayant fait du développement de petits projets durant la première année d'ingénieur, je voulais vraiment travailler sur un gros projet. De plus, les technologies du web ne me sont inconnue, j'avais déjà créer un site web, pour mon compte personnel, avant mon entrée à EPITA.\par 
\medskip
La principale attente que j'avais de ce stage était de développer mes connaissances, peu importe le langage. Aussi, l'un des critères important dans mes recherches était d'avoir un maître de stage disponible et m'aidant sur mes problèmes, c'est pour cela que mes recherches se sont concentrées sur les grands entreprises, et on pas sur les start-up.\par
Durant mes recherches, je me suis rendu compte qu'il y avait peu d'offre de stage dans le développement d'application en C/C++ ou en Java, la plupart des offres portaient sur le développement de site web. \par 
\medskip
Deux offres de stage ont retenu mon attention, la première se déroulait chez Hachette Livre et avait comme sujet le développement d'applications ludo-éducatives mobile. La seconde se déroulait à la Fédération Nationale du Crédit Agricole et avait comme sujet le développement d'un site internet.\par 
\medskip
La première offre semblai intéressante car elle m'aurait permis de développer mes connaissances dans le mobile. De plus, les connaissances requises portait sur le C/C++, le développement orienté objet et l'utilisation de patrons de conception. Cependant, après un premier entretient, on m'a expliqué que le développement se faisait en Javascript ou en C\# avec le moteur de rendu \textit{Unity}.\par 
\medskip
La seconde offre était tout aussi intéressante, car en plus de pouvoir travailler avec de nouvelles technologies du web, il été question de travailler sur un site qui devait être adapté aux mobiles, tablettes et ordinateurs. De plus le stage se positionnait parfaitement dans la continuité du programme suivit à l'école, en effet, l'application web était développé en Java, comme dernier projet de l'année.\par 
\medskip
J'ai donc choisit la seconde offre, et j'ai effectué mon stage à la Fédération Nationale du Crédit Agricole, au sein du service Publication et Multimédia. Le sujet complet de ce stage est le suivant :\par 
\medskip
Au sein du département publications et multimédia de la Fédération Nationale du Crédit Agricole, vous intégrez une équipe de 6 personnes en charge des sites internet. Dans le cadre de la migration technique prévue des espaces internet et extranet qui reposent sur la solution JCMS (Jalios), des aménagements fonctionnels et une refonte graphique sont prévus.\par
Vous serez donc amené à intervenir en tant qu'intégrateur web principalement sur la couche présentation mais également initié aux subtilités de notre CMS (technologies Java J2E).\par
Vous devrez traduire les nouvelles spécifications d'interface et les implémenter au moyen des technologies Javascript, HTML et CSS, et tenir compte des contraintes liés aux différents supports : Tablettes, Mobile, Web.\par 
Vous serez sous la responsabilité d'un chef de projet et d'un développeur senior.\par 
\medskip

\newpage

\section{Présentation de l'entreprise}
\subsection{Secteur d'activité}
Le Crédit Agricole est un acteur majeur du secteur financier français, et plus particulièrement sur les métiers bancaire et assurances (bancassurance).
La Fédération Nationale du Crédit Agricole fait partie du groupe Crédit Agricole, elle dispose donc des mêmes secteurs d'activités.\par
\subsection{Fédération Nationale du Crédit Agricole}
\begin{figure}[h!]
\centering
\includegraphics[scale=0.5]{images/logo_fnca.jpg}
\caption{\label{logo}Logo du Crédit Agricole} % (figure \ref{logo})
\end{figure}
La Fédération Nationale du Crédit Agricole est une entité du groupe Crédit Agricole.\par
Afin de bien comprendre le rôle et le positionnement de la Fédération Nationale du Crédit Agricole, il est nécessaire d'expliquer ce qu'est le Crédit Agricole.
\subsubsection{Le Crédit Agricole}
Le Crédit Agricole est une banque et assurance mutualiste. Crée en 1885, en France, elle s'est depuis développée à l'internationale. Elle dispose de 21 millions de clients particuliers, dont 6 millions en France (chiffres de fin 2013).\par
A l'origine le Crédit Agricole était une banque pour les agriculteurs, c'est pour cela qu'aujourd'hui c'est la banque de 9 agriculteurs sur 10 en France.\par
Le Crédit Agricole est une banque mutualisme, c'est à dire que tout les clients peuvent, en devenant sociétaires, participer aux décisions de l'entreprise. Le Crédit Agricole compte, depuis novembre 2014, 8 millions de clients sociétaires.\par 
Le Crédit Agricole possède une organisation particulière, elle est divisé en Caisses régionales qui sont elles-mêmes divisées en Caisses locales. Ces divisions permettent au Crédit Agricole d'avoir une certaine proximité avec les clients. Cette proximité se fait aussi grâce au 7000 agences en France\par 

\subsubsection{Historique}
\begin{tabular}{lp{15.5cm}}
\textbf{1885} & Création de la société du Crédit Agricole avec la première Caisse locale dans le Jura. Le Crédit Agricole est en premier lieu une banque pour les agriculteurs. C'est pour cela que cette Caisse locale permettait aux agriculteurs d'emprunter des fonds afin de développer leurs activité.\medskip \\
\textbf{1889} & Les Caisses régionales ont été créées grâce à la loi du 31 mars 1899 pour encourager la création de Caisses locales et de les fédérer.\medskip \\
\textbf{1913} & Grâce à un développement rapide, il y a des Caisses locales dans tous les départements de France.\medskip \\
\textbf{1926} & Création de la Caisse Nationale du Crédit Agricole, banque centrale du groupe. L'organisme devient public et dépend du ministère de l'agriculture.\medskip \\
\end{tabular}
\begin{tabular}{lp{15.5cm}}
\textbf{1948} & Création de la Fédération Nationale du Crédit Agricole pour permettre aux Caisse régionales de pouvoir entre elles sur l'organisation et la stratégie du groupe face à l'état.\medskip \\
\textbf{1985} & Le Crédit Agricole lance sa filiale d'assurance vie : Prédica.\medskip \\
\textbf{1988} & Grâce à la loi relative à le mutualisation de la CNCA, la Caisse nationale est affranchie de l'état. Son capital est détenu à 90\% par les Caisses régionales et à 10\% par le personnel.\medskip \\
\textbf{1990} & Création de Pacifica, compagnie d'assurance des biens. En 1993 le Crédit agricole devient le second groupe d'assurance en France.\medskip \\
\textbf{1991} & Le Crédit Agricole est autorisé à financer les grandes entreprises et devient une banque universelle. Elle peut donc financer toute clientèle en France et à l'étranger, et peut exercer tous les métiers de la banque et la finance.\medskip \\
\textbf{1998} & Le Crédit Agricole rachète Sofinco.\medskip \\
\textbf{2001} & La Caisse nationale est cotée en bourse sous le nom de Crédit Agricole SA.\medskip \\
\textbf{2003} & Rachat du Crédit lyonnais qui deviendra LCL en 2005.\medskip \\
\textbf{2004} & Naissance de Calyon banque d'investissement, qui deviendra plus tard Crédit Agricole Corporate and Investment Bank. Lancement de la filiale immobilière.\medskip \\
\textbf{2006} & Développement à l'étranger avec l'acquisition de Cariparma, une banque italienne.\\
\textbf{2009} & Lancement de BforBank, banque en ligne spécialiste de l'épargne.\medskip \\
\end{tabular}\par

\subsubsection{Organisation}
Aujourd'hui, le Crédit Agricole est composé de 2509 Caisses locales. Les Caisses locales sont des sociétés civiles coopérative dont les parts sont détenues par les sociétaires. En plus de participer à la gestion de la Caisse régionale dont elle est sociétaire, elle participe aussi au développement local en valorisant des initiatives sur son territoire.\par 
\medskip
Les Caisses locales sont regroupées en 39 Caisses régionales. Les Caisses régionales sont des entreprises indépendantes, partageant les mêmes valeurs. De ce fait, les centres de décision sont plus proches des clients, ce qui permet de prendre en compte la situation et l'environnement du client. Leur rôle est de répondre aux attentes de leurs clients et leur territoire, que ces attentes concernent le cœur de métier du Crédit agricole, domaine bancassurance, ou d'autres domaines où leur présence est légitime. Les Caisses régionales sont dirigées par un duo président (élu)/directeur général (cadre dirigeant). \par 
\medskip
Bien que les caisses régionales soient des entreprises indépendantes, elles font partie du groupe Crédit Agricole et doivent être coordonnées. Ce rôle est tenu par Crédit Agricole SA, qui garantie l'unité financière et veille au bon fonctionnement du réseau Crédit Agricole. De plus Crédit Agricole SA gère aussi les filiales internationales du Crédit Agricole.\par 
Le Crédit Agricole SA est aussi chargé de concevoir les produits et services proposés dans les agences bancaire, afin permettre le développement des Caisses régionales.\par
Crédit Agricole SA acquière 25\% du capital des Caisses régionales sous forme de CCA (certificat coopératif d'associés), sans droit de vote.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.5]{images/organisation.png}
\caption{Organisation du Crédit Agricole}
\end{figure}

\newpage
\subsubsection{Fédération Nationale du Crédit Agricole}
La Fédération Nationale du Crédit Agricole est une association du groupe Crédit Agricole. Contrairement aux entités présentées précédemment, la Fédération Nationale du Crédit Agricole n'a pas de chiffre à faire. La Fédération Nationale du Crédit Agricole qui a 3 grandes fonctions au sein du groupe : 
\begin{itemize}
\item orienter,
\item représenter,
\item gérer.
\end{itemize}
La Fédération Nationale du Crédit Agricole est le lieu où les grandes orientations du groupe sont prises. Elle est l'instance de réflexion des Caisses régionales, c'est pour cela qu'elle est qualifié de "Parlement des Caisses régionales". Elle représente aussi les 39 Caisses régionales face aux pouvoirs publics et à Crédit Agricole SA.\par 
\bigskip
Des réunions mensueles ont lieu à la Fédération Nationale du Crédit Agricole, où se réunissent les présidents et directeurs généraux des Caisses régionales. Durant ces réunions, ils débattent des grandes orientations du groupe en matière commerciale, financière, technologique, sociale, etc. Ces grandes orientation sont validées par un bureau fédéral de 20 membres, composé de 10 présidents et 10 directeurs généraux. Il est présidé par par un président de Caisse régionale et le secrétaire général est un directeur général de Caisse régionale.\par 
\bigskip
La Fédération Nationale du Crédit Agricole ne sert pas uniquement de lieux où se déroulent les réunions mensuelles. Elle dispose d'équipes, 130 employés, qui préparent les dossiers liés aux grandes thématiques qui préoccupent le Crédit Agricole. Elle aide aussi à structurer les propositions des Caisses régionales, afin qu'elles puissent s'exprimer d'une seule voix, quand cela est nécessaire. En plus de cela, la Fédération exerce des missions qui lui sont propres, comme l'animation des clubs d'échanges et d'achats ou la gestion de la convention collective des Caisses régionales.\par

\subsection{Le service}
La stage s'est déroulé au sein du service Publication et Multimédia. Équipe de 8 personnes, 2 pôles\par

\subsection{Positionnement du stage dans les travaux de l'entreprise}
Le stage se positionne comme support dans les travaux de l'entreprise. Le projet, sujet du stage, avait débuté avant celui-ci et devait être livré à la moitié du stage. L'entreprise recherchait une aide pour assurer la livraison du projet dans les temps et pour assurer le support, au cas où des problèmes apparaitraient lors de la mise en production.

\newpage

\section{Travail effectué}
\subsection{Sujet du stage}
Le sujet du stage consistait à participer à une refonte du site internet de le Fédération Nationale du Crédit Agricole : www.creditagricole.info, en vue de sa mise en production et corriger les éventuels bogues ensuite.\par
Le site est basé sur un système de gestion de contenu (SCG ou CMS en anglais), \gls{JCMS} développé par Jalios.\par
Le site utilisait la version 6 de \gls{JCMS}, sortie en 2009, et le but du projet était de migrer le site sur la version 9 de \gls{JCMS}, sortie en octobre 2014. En plus de ce changement de version, une refonte graphique était aussi prévue.\par
Les technologies utilisées pour mener à bien ce projet sont :
\begin{itemize}
\item Java Entreprise Edition 1.6,
\item Javascript/JQuery,
\item Bootstrap 3.0.1,
\item Less,
\item HTML 5.
\end{itemize}

\subsubsection{Le site creditagricole.info}
Le site creditagricole.info fut lancé en 2009, il fait suite à boetianet, précédent site exclusivement interne. Le site est divisé en deux parties :
\begin{itemize}
\item une partie internet ouvert à tout le monde,
\item et l'espace interne, réservé aux employés du Crédit Agricole.
\end{itemize}\par 
\medskip
Le site internet sert de vitrines aux 39 Caisses régionales en regroupant toutes leurs actions sur le territoire sous forme d'actualités et de vidéos. Aussi ce site permet aussi à la Fédération Nationale du Crédit Agricole d'avoir une présence sur internet. En effet, avant 2009 il était très difficile de trouver des informations sur cette instance du Crédit Agricole.\par
Le site internet est un donc un site éditorial, une grande partie des contenus du site sont issue des actualités des Caisses régionales, l'autre partie provient de la Fédération Nationale du Crédit Agricole qui propose des sujets de réflexion. Afin de relater toutes les informations, le site dispose de plusieurs types de contenus :
\begin{itemize}
\item article,
\item dossier (un ensemble d'articles),
\item brèves,
\item vidéo,
\item évènement,
\item fiche initiative,
\item communiqué de presse.
\end{itemize}\par
Généralement, les articles, évènements, fiches initiatives et certaines vidéo relatent l'actualité des Caisses régionales. Les dossiers et une partie des vidéos sont eux issus de la FNCA et apportent des sujets de réflexion.\par
\bigskip
L'espace interne sert d'espace d'échange au sein du groupe Crédit Agricole. Seuls les employés du Crédit Agricole peuvent s'inscrire, ceux des autres banques du groupe peuvent aussi s'inscrire mais ils auront un accès limité à l'espace interne.\par 
L'espace interne est composé de clubs, ils servent d'espace de discussion et d'échange. Pour cela, il est possible de publier des brèves (court article) et des documents au sein d'un club. De plus, chaque club dispose d'un forum où les membres peuvent discuter librement. Il y a deux types de club : 
\begin{itemize}
\item les club à accès libre, tout membre du site peut s'inscrire, ils ont généralement pour sujet un thème qui est commun à tous les employés du Crédit Agricole,
\item les club privé, l'inscription se fait par une demande à l'administrateur du club, ils ont pour sujet des thèmes sensibles, par exemple le club des dirigeants.
\end{itemize} \par 
\bigskip
La base de ce site est donc la rédaction de contenu et la collaboration c'est pour cela que l'entreprise a choisi un système de gestion de contenu. L'entreprise a décidé d'utiliser un SGC français développé par Jalios : \gls{JCMS}.

\subsubsection{JCMS}
Comme tout SGC, \gls{JCMS} permet de faire de la gestion de contenu avec gestion des droits. Publier des contenus sur un site web devient alors à la portée de tous car il suffit de déposer son contenu sur le site et \gls{JCMS} s'occupe de générer une page page HTML. Un SGC est généralement découpé en deux parties : 
\begin{itemize}
\item la première partie, accessible à tout le monde, permet d'afficher les contenus publiés, elle est appelé front office,
\item l'autre partie, privée, permet d'ajouter des contenus et de paramétrer / structurer le site, c'est le back office.
\end{itemize}\par
Au point de vue technique, \gls{JCMS} est composé d'un ensemble de portail, qui correspond à une page. Un portail c'est un assemblage de portlet, caractérisé par un gabarit de page portail, associé à l'arborescence du site. Un portail est générique et n'est pas forcément associé à une seule page.\par 
Un portlet est un élément du portail, elles servent à générer différents composants d'une page. Il existe différents types de portlets : 
\begin{itemize}
\item portlets de construction de page,
\item portlets de contenu,
\item protlets de navigation,
\item portlets fonctionnelles.
\end{itemize}
L'assemblage des différents types de portlets permet de construire des gabarits de pages portail. De plus, une portlet peut être, elle-même, composée de portlets.\par 
Par défaut, \gls{JCMS} contient un certain nombre de type. Un type c'est la structure d'un contenu ou d'une portlet. C'est une organisation technique d'un besoin fonctionnel, un type est constitué d'un ensemble de champs (texte, lien, image, etc), par exemple un article est constitué d'un champ texte simple pour le titre, un champ texte riche pour le contenu et un champ image pour l'illustration.\par 
Un type de contenu ou une portlet une fois instanciés peuvent être publiés en front office par un contributeur. On parle alors d'une publication. À cette instance, il est possible d'associer un gabarit de présentation, ce qui devient un contenu.\par
Il existe 2 types de gabarits : les gabarits d'affichage du contenu en pleine page dans le front office en fonction du type de contenu et les gabarits de requêtes pour afficher les résultats d'une recherche. Ces gabarits sont liés à un type et sont personnalisables, il est possible d'avoir plusieurs gabarits pour un type. Il y a différents types de gabarits :
\begin{itemize}
\item Gabarit de présentation de contenu : il définit les normes d'affichage d'un contenu, par exemple comment afficher un article,
\item Gabarit de portlet : ils sont développés par Jalios ou par un développeur et permettent de définir l'affichage au sein de la portlet,
\item Gabarit de la page portail : il définit l'organisation des différentes portlets à l'intérieur d'une portlet de type portail.
\end{itemize}\par 
Les contenus et les portails peuvent être organisés de façon hiérarchique au sein de \gls{JCMS} grâce aux catégories. Elles sont utilisées pour la navigation au sein du projet creditagricole.info.\par
\gls{JCMS} est organisé en espaces de travail permettant notamment de donner à certains utilisateurs des droits de gestion (contribution, modification,...) sur les publications (contenu et portlet) et les catégories.\par 
\begin{figure}[h!]
\centering
\includegraphics[scale=0.65]{images/page.png}
\caption{Structure d'une page}
\end{figure}

\medskip
Comme vu précédemment, le site creditagricole.info propose un certain nombre de types de contenus qui ne sont pas forcément présents par défaut au sein de \gls{JCMS}. Pour personnaliser ou ajouter des types de contenu ou des portlets, \gls{JCMS} propose un développement par module, qui seront ajoutés à l'application au démarrage du serveur. Les modules contiennent les types de contenu, les gabarits d'affichage, les habillages personnalisés, mais aussi les images, les styles CSS/Less, des JavaServer Pages (jsp) qui permettent d'exécuter du java au sein de contenu HTML, etc. Le module doit avoir une structure précise afin de permettre l'intégration à l'application. Dans une but d'assurer une compréhension des actions d'un module, celui-ci doit disposer d'un fichier XML qui fera le liens entre l'application et les fichiers du module, c'est lui qui servira notamment à préciser à \gls{JCMS} si un fichier est un gabarit d'affichage, un habillage, ... et à quel type il est relié.\par 
Ce développement par module permet à tous les sites utilisant \gls{JCMS} d'avoir une même base, mais aussi de partager leurs modules sur le site communautaire de Jalios. De là, les autres développeurs peuvent pendre les modules pour ajouter des fonctionnalités à leur site facilement.\par 
Le site internet creditagricole.info est organisé en plusieurs modules :
\begin{itemize}
\item FNCANewsletterPlugin : ce module contient les types de contenu, les gabarits d'affichage, les images et les styles utilisés pour la visualisation et l'envoi de lettre d'information,
\item FNCAWebCartographiePlugin : ce module contient toutes les JSP relatives à la configuration et à l'affichage des cartes de Google Maps sur le site,
\item FNCAWebGrIDsurePlugin : ce module gère toute la partie authentification en utilisant un système de motif comme mot de passe, et s'appuie sur un webservice.
\item FNCAWebModelPlugin : ce module est l'un des plus important car il contient tout les types de contenu, ainsi que leur gabarit d'affichage, nécessaire au bon fonctionnement du site,
\item FNCAWebPlugin : ce module est le plus important, il contient tout ce qui est commun à toute les pages du site comme les styles, le menu, le logo, mais aussi des pages spécifique comme la page de connexion, la page d'accueil, etc.,
\item FNCAWebPortletPlugin : ce module contient toutes les portlets du site,
\item FNCAXitiPlugin : ce module contient le code à inclure pour avoir des statiques sur les visite du site creditagricole.info.
\end{itemize}\par

\subsubsection{Base de données}
En informatique et plus particulièrement sur le web, la persistance des données est une fonction importante. Sur le web les données sont stockées dans des bases de données, qui sont gérees par des \gls{SGBD}. Il existe deux types de \gls{SGBD} : le SQL et le NoSQL.\par 
\medskip
Le \gls{SGBD} le plus répandu est le SQL, les données sont stockées sous forme de tableau dans des "Tables". Le SQL est un \gls{SGBD} relationnel, il est donc possible de lier des tables, afin d'éviter une redondance des données dans différentes tables, et permet une meilleure gestion des données.\par
\medskip
Le NoSQL, qui veut dire \textit{Not only SQL} en anglais, est un \gls{SGBD} non relationnel. Il y a plusieurs familles de NoSQL qui ont différentes bases, mais les plus connues se basent sur un système de clé/valeur.\par
\medskip
\gls{JCMS} utilise les deux types de \gls{SGBD}, le SQL est utilisé pour stocker certaines configuration ainsi que quelques données, mais les différentes instances de types et de portlets sont stockées en NoSQL sous forme d'XML. Ce dernier, nommé "store" au sein de \gls{JCMS}, est composé d'un empilement d'opérations (créer, mettre à jour, supprimer), ce système permet de garder en mémoire tous les états de la base de données, et facilite le retour à un état précédent. Le store a facilité la migration, car un point de repère a été placé à la fin de celui-ci au début du développement, de façon à fusionner uniquement les opérations qui se trouvent après la marque.\par

\subsubsection{Less}
Le less est une extension du langage CSS. Le CSS permet de définir des styles pour les éléments d'une page HTML. Le CSS est un langage statique, les notions de variables, fonctions et boucles n'existent pas en CSS. Le less permet d'apporter ces notions au CSS, cependant, les navigateurs internet ne savent interpréter que du CSS. Le less est donc compilé afin de produire du CSS, cette compilation se produit au démarrage du serveur ou par un administrateur, mais elle n'a pas lieu à chaque chargement d'une page.\par 

\subsubsection{Bootstrap}
Bootstrap est un ensemble d'outils, développé par Twitter, utile lors de développement de site web. Il est composé d'un ensemble de code HTML, CSS et Javascript qui permettent de mettre en page un site web facilement, et d'y ajouter quelques fonctionnalité dynamiques comme un carrousel ou un système d'onglet. Toutes les feuilles de styles sont faite en Less, et il est possible de les surcharger pour plus de personnalisation. Pour les fonctionnalités Javascript, Bootstrap utilise la bibliothèque JQuery, qui n'est pas comprit dans ce dernier, il faut donc l'inclure à part.

\subsubsection{Mantis}
Pour le suivi des faits techniques, l'entreprise utilise l'outil OpenSource Mantis. Cet outil se présente sous la forme d'un site web hébergé au sein de l'entreprise. Seule une partie du service est inscrit. Il permet de reporter des bogues ou des améliorations, sous forme de ticket. Ce ticket peut être ensuite attribué à une personne et dispose de plusieurs états. L'outil permet aussi d'ajouter des commentaires et des images aux tickets afin de les rendre plus expressifs.\par 
Quand un bogue ou une amélioration était résolu, en plus de changer l'état du ticket, il fallait préciser en commentaire les fichiers qui avaient été modifiés afin d'avoir une trace. De plus les commits devaient comporter le numéro et le titre du ticket qu'il résolvait.\par

\newpage
\subsection{Architecture}
L'entreprise possède ses propres serveurs pour héberger le site creditagricole.info. Elle dispose de deux salles contenant en tout 9 serveurs :
\begin{itemize}
\item 3 serveurs de test, dont 1 serveur SQL,
\item 6 serveurs de production, dont 2 serveurs SQL.
\end{itemize}
En plus des serveurs, des baies sont disponibles pour sauvegarder tous les documents, images, vidéos, etc. qui dont mis en ligne sur le site. L'entreprise utilise pour cela des NAS, cela leur permet de bien séparer le site des documents mis en ligne par les utilisateurs. De plus, pour plus de sécurité et pour éviter des mélanger les documents issus du site internet et les documents de la partie interne, ils disposent de deux baies différentes pour chaque partie du site.\par
\medskip
Tous les serveurs (test et production) sont sous OS Windows Server 2008. Sur chacun d'eux sont installés les serveurs web Apache et applicatifs Tomcat, qui sont nécessaires au fonctionnement du site.\par
Les deux serveurs de test servent à héberger une version de test de chaque partie du site. La version de test du site internet est hébergée sur le serveur de test 2 (TST2), et l'espace interne est hébergé sur le serveur de test 3 (TST3).\par
Au niveau de la production, chaque partie du site (internet et espace interne) dispose de deux serveurs, un principal et un de secours. Le serveur de secours est appelé réplicat car il réplique toutes les modifications effectuées sur le serveur principal. En cas de problème avec le serveur principal, la bascule sur le réplicat se fait automatiquement.\par
La connexion par bureau virtuel est restreint aux serveurs de tests pour le service Publication et Multimédia. Pour déposer des fichiers ou effectuer des actions sur les serveurs de production, par soucis de sécurité, il faut passer obligatoirement par la DSI, aucune connexion par bureau virtuel n'est autorisée pour les personnes n'appartenant pas à la DSI.\par
\medskip
En plus des serveurs de test, l'entreprise dispose d'un serveur sous OS Linux contenant une plateforme d'intégration continue \gls{JADE}. 
\begin{figure}[h!]
\centering
\includegraphics[scale=0.3]{images/archi.png} 
\caption{Architecture d'un environnement de production}
\end{figure}

\subsubsection{Plateforme d'intégration continu}
Pour les test d'intégration continue, l'entreprise a mis en place un serveur contenant une plateforme d'intégration continue, \gls{JADE}, développée par Jalios. \gls{JADE} permet de produire automatiquement des livrables, détecter les problèmes rapidement et centraliser les informations. \gls{JADE} est livré sous forme de machine virtuelle par Jalios et les composants suivants y sont pré-installé : 
\begin{itemize}
\item Jenkins, un outil Open Source d'intégration continue écrit en Java
\item \gls{SVN},
\item des scripts permettant de produire des modules et des applications.
\end{itemize}
\gls{JADE} exécute les scripts de tests et compilations périodiquement sur chaque module. Pour le projet creditagricole.info, un module est exécuté toute les demi-heures. Ces scripts permettent de générer des modules compilés, qui pourront être intégré au sein d'une application \gls{JCMS}. Une fois tous les modules compilé, \gls{JADE} génère une application \gls{JCMS} avec les modules directement intégré, et ceci pour facilité le déploiement.\par
Les scripts fournit au sein de \gls{JADE} sont composé des actions suivantes : 
\begin{itemize}
\item téléchargement de la dernière version du module grâce à \gls{SVN},
\item téléchargement des fichiers de configuration et du store de référence,
\item copie des modules de Jalios et de l'application \gls{JCMS} vierge,
\item décompression de \gls{JCMS} et déploiement des modules,
\item préparation du démarrage d'une instance de Tomcat sur un port libre, déterminé automatiquement,
\item démarrage de \gls{JCMS} via Tomcat afin de vérifier que les classes du module sont bien compilées
\item deuxième redémarrage de \gls{JCMS} pour effectuer les tests unitaires,
\item construction du livrable.
\end{itemize}\par 

\newpage
\subsection{Cahier des charges}
Pour ce projet, l'entreprise ne disposait pas de cahier des charges, mais disposait d'un cahier fonctionnel réalisé par une web agency (BETC).\par
Cependant, bien qu'il n'y avait pas de cahier des charges, le but et les différents points de ce projet furent définis lors de réunions au début de celui-ci. Cela permettait d'utiliser une méthodologie agile. Lors de développement de fonctionnalités, une réunion était organisée afin de définir les objectifs et ceux-ci furent contrôlés à la fin du développement.\par 
Cette méthode avait un grand avantage, la réactivité, que ce soit au niveau de modification, correction ou création de fonctionnalités. Mais elle avait aussi des désavantages, certain points ne furent fixés qu'à quelques semaines de la fin du projet. De plus, le cahier fonctionnel n'était pas complet, seuls deux types de contenu avaient une maquette : le type article et le type dossier. Les autres maquettes ont du être définies par l'équipe, en s'inspirant des maquettes du cahier fonctionnel, tout au long du développement. \par 
Le but du projet peut aussi expliquer l'absence de cahier des charges, il s'agissait d'une migration. De ce fait, la plupart de ses fonctionnalités devaient être toujours présentes, tout en proposant un design remis au gout du jour. Tout ce qui était faisable sur le site avec la version 6 de \gls{JCMS} devait être fonctionnel avec la version 9.\par 
Aussi, l'entreprise ne pouvait pas fixer de date de fin du projet dès le début de celui-ci, car la version 9 de \gls{JCMS} sur laquelle le site se base était encore en développement. De plus, la date de sortie de \gls{JCMS} 9 fut repoussée de 4 mois, initialement prévu en juin 2014, elle est finalement sortie en octobre 2014. Il n'était donc pas possible de prévoir le date de fin du projet, au début de celui-ci, c'est à dire début mai 2014. La date de mise en production du site internet fut fixée au 3 novembre 2014, peu avant le début du stage en septembre. Une étape intermédiaire en \gls{JCMS} 8 a donc été nécessaire ; ainsi le site a subi deux migrations.\par
\subsection{Compte-rendu d'activité}
\subsubsection{Apprentissage des technologies utilisées}
Le stage a débuté par une période de formation aux technologies utilisées par l'entreprise. \gls{JCMS} étant un SGC utilisé en milieu professionnel, il était difficile d'avoir des connaissances sur ce sujet en dehors de ce milieu. Cette période de formation fut composée de :
\begin{itemize}
\item lecture de documentation sur \gls{JCMS} afin de comprendre son fonctionnement global et celui du développement en modules,
\item tests sur une application \gls{JCMS} vierge,
\item apprentissage du less.
\end{itemize}\par 
Pour le développement l'entreprise utilise l'IDE Eclipse, il est conseillé par Jalios qui fournit un outil pour le développement modulaire. En effet, chaque module est considérer comme un projet, et sont au même niveau que l'application web \gls{JCMS}. Cependant, \gls{JCMS} ne peut pas récupérer les modules en dehors de l'application, et la seul manière de les inclure est de passer par l'interface web une fois l'application lancée. Pour éviter cette manipulation à chaque modification d'un module, Jalios propose un outil qui permet de synchroniser les fichiers d'un module entre sa version au sein de \gls{JCMS} et sa version en tant que projet.\par
La période de formation devait être la plus courte possible afin de pouvoir travailler le plus vite sur le site qui devait être en production deux mois plus tard. \par

\subsubsection{Partage vers les réseaux sociaux}
La première tâche confiée fut l'intégration de boutons de partage vers les réseaux sociaux. Ceux-ci existaient déjà dans la version précédente du site, et permettaient le partage sur Facebook ainsi que sur Twitter. Mais il manquait des balises d'identification de contenus.\par 
Lorsque que l'on partage un contenu sur Facebook, celui-ci visite la page que l'on souhaite partager à la recherche de balises contenant des informations sur la page. A partir des informations recueillies il génère une fiche de présentation qui sera affichée sur le post de partage, ce qui est beaucoup plus parlant qu'un lien.\par
Les balises se présentent sous la forme de balise \textit{meta} qui sont situées entre les balises \textit{head} de la page. Elles permettent de donner plusieurs informations à Facebook :
\begin{itemize}
\item titre (balise \textit{og:title})
\item description (balise \textit{og:description})
\item url (\textit{og:url})
\item image (\textit{og:image})
\end{itemize}
Si une de ces balises est manquante, Facebook ira chercher dans la page les informations manquantes. Ces informations ne sont pas prises au hasard, par exemple si la balise \textit{og:title} qui précise un titre est manquante, Facebook prendra le titre de la page, qui se trouve dans la balise \textit{title} au sein des balises \textit{head}. Il est préférable de préciser ces informations afin de contrôler ce que Facebook va afficher sur le post de l'utilisateur et éviter de donner une mauvaise image à un potentiel visiteur avant qu'il n'arrive sur le site.\par
\bigskip
Les boutons de partage visibles sur les pages ont du être mis à jour, pour se conformer aux dernières API's de Facebook et Twitter. Avant même de commencer à développer, il fallait se documenter sur la manière d'intégrer ces boutons au sein du site. Pour cela Facebook et Twitter ont mis en place des pages de documentation à destination des développeurs. \par 
Après les recherches et au début du développement, une autre solution fut proposée afin de faciliter l'intégration et d'avoir des statistiques. Cette solution était un service, nommé AddThis, qui permet une intégration des boutons de partage sur un site internet ou une application mobile. Cette solution est utilisée sur de nombreux site web car elle présente plusieurs avantages : 
\begin{itemize}
\item intégration sur le site facilité, car celui-ci se fait par l'ajout d'un lien vers un script ainsi qu'une balise avec un identifiant spécial (\textit{addthis\_sharing\_toolbox}) là où l'on veut que les boutons apparaissent,
\item une gestion des réseaux sociaux, sur lesquels seront partagés les pages, simple d'accès car tout se fait à l'aide d'une interface où il suffit de faire glisser le réseau social voulu de la liste de tous les réseaux sociaux disponibles vers celle choisie pour apparaitre sur le site,
\item des statistiques qui donnent le nombre de partage par jour ainsi que le nombre de clics sur les liens partagés.
\end{itemize}\par
Avant d'intégrer cette solution au sein du site, une vérification des droits d'utilisation a été faite. La solution propose deux offres, une payante et une gratuite. L'offre utilisé par l'entreprise serait l'offre gratuite, il fallait donc vérifier si son cadre d'utilisation incluait un usage professionnel. Cela n'était pas précisé, la solution fut donc intégrée.\par

\subsubsection{Brèves}
Le travail proposé était de refaire la partie concernant les brèves. Une brève est une article court ou un évènement, sans image où l'information tient en un ou deux paragraphes. Du point de vue de \gls{JCMS}, cela ne correspond pas à un type de contenus mais à un contenu article ou évènement catégorisé en tant que brève.\par
\medskip
Sur l'ancien site, les brèves étaient présentées en deux pages : une page lanceur et une page où la brève était entièrement affichée. Une page lanceur est une page sur laquelle on trouve une liste de contenus avec le plus souvent une pagination. Pour les brèves, le lanceur consistait à afficher le titre de la brève, le début de la brève ainsi que des informations complémentaires. Le problème de ce système fut qu'il nécessitait un clic et un changement de page avant de pouvoir lire la brève.\par
Ce qui fut proposé comme amélioration était d'avoir toutes les brèves sous forme de liste. Chaque brève est représentée par son titre et peut être ouverte en cliquant sur le celui-ci. Elle se déplie et laisse apparaitre le corps de celle-ci. L'avantage de cette solution est de pouvoir lire entièrement la brève à partir de la page lanceur et du coup en pouvoir lire plusieurs à la suite sans changer de page. Pour ce faire l'utilisation de Bootstrap a été conseillée car celui-ci disposait déjà de classes permettant ce comportement.\par
\medskip
Au cours du développement, un problème a été trouvé à cette présentation : elle ne permet pas de partager les brèves sur les réseaux sociaux. En effet, comme vu précédemment, pour être partagé un contenu doit pouvoir donner des informations au travers de balises, cependant ces balises sont uniques par page, par exemple on ne peut pas avoir plusieurs titres pour une même page. Or le but de cette présentation est d'avoir plusieurs brèves sur la même page.\par
Après un premier rendu, un problème de lisibilité est apparu sur les serveurs de test. Ce premier rendu utilisait les classes par défaut de Bootstrap sans surcharge. Elles présentaient chaque brève dans un rectangle délimité par une bordure grise, à l'intérieur le titre et le corps de la brève étaient séparés par une bordure. Le titre des brèves disposait d'une couleur de fond. Sur un faible nombre de brève (l'application en locale disposait de 5 ou 6 brèves) ce problème de lisibilité n'était pas important, mais lorsqu'il y a une une vingtaine de brèves affichées, il est difficile de savoir que le corps de la brève est relié au titre précédent. Pour palier à ce problème, il a été proposé de retirer la bordure entre la brève et le titre lorsque celle-ci était ouverte ainsi que la couleur en fond.\par
\medskip
Le second rendu, bien que plus clair dans la lecture, n'était pas tout à fait satisfaisant. Les brèves étaient affichées en liste, et seul leur titre les différenciait, mais celui-ci n'était pas suffisant car il manquait une information importante, la date de publication. Il peut y avoir plusieurs brèves par jour, et ceci est facilité par leur forme courte. Sans date il était difficile de se repérer dans le flot de brèves. Elle a donc été rajoutée au même niveau que le titre mais alignée sur la droite en gris.\par
Une amélioration fut aussi apportée au niveau de la navigation à l'intérieur du lanceur. Jusqu'à maintenant, l'ouverture d'une brève se faisait par un clic sur le titre de celle-ci, or pour faciliter la navigation il a été proposé d'étendre la possibilité de clic au bandeau contenant le titre et la date. Cette solution fut validée et mise en place.\par
\medskip
Cette présentation plus claire fut réutilisée pour la page des communiqués de presse. Contrairement aux brèves qui sont courtes, les communiqués de presse sont longs, mais cette présentation reste acceptable. Pour le lanceur des brèves il y en a une vingtaine de contenus par page, alors que pour le lanceur des communiqués de presse il y en a cinq. Cela permet d'avoir plusieurs communiqués de presse sur la même page avec une facilité de navigation.\par
\begin{figure}[h!]
\centering\includegraphics[scale=0.5]{images/breve_avant_apres.jpg} 
\caption{Les brèves avant avec le lanceur et page de contenu et après}
\end{figure}
\bigskip 
La refonte de la partie brève comprenait aussi un bandeau sur la page d'accueil. Il permet d'afficher le titre de certaines brèves et de renvoyer vers celle-ci. Ces brèves sont choisies, cela dépend d'une certaine catégorisation. Le bandeau affiche un titre après l'autre, de ce fait, il n'y a jamais deux brèves en même temps. Ce bandeau existait sur l'ancien site, et l'on pouvait mettre pause au défilement des titres.\par 
Sur le nouveau site il a été décidé, dans un soucis d'épuration et de simplification, d'enlever les contrôles (jouer, pause) sur le défilement, mais de garder le défilement. Au niveau du développement, afin de ne pas garder de vieux code, il a été décidé de repartir de zéro. L'animation du titre qui disparait pour laisser sa placer au suivant nécessite de modifier le code HTML de la page après sa génération par le serveur. La modification d'un code HTML après sa génération est possible grâce à une interface, le DOM, qui est implémenté au sein du Javascript. De plus afin de faciliter l'utilisation du Javascript, la bibliothèque jQuery a été utilisée.\par 
La méthode mise en place pour permettre cette animation consistait à :
\begin{itemize}
\item charger tous les titres des brèves à afficher dans le code HTML, ils sont tous cachés sauf le premier, avec une propriété CSS, et ils disposent d'un identifiant unique,
\item le nombre de brève affiché est sauvegardé,
\item une fois la page chargée par le navigateur, il exécute la fonction en Javascript qui itère en boucle sur tous les titres, avec un intervalle de 5 secondes.
\end{itemize}
Aussi, il a été demandé une option permettant de ne pas afficher les évènements passés. Cette option serait placée dans le back office, dans les options du module web. Pour se faire il suffisait une fois les résultats de la requête connue de tester leur date de validité. Ce test entraine une réduction du nombre de brèves affichés car il se fait en aval de la requête, mais ne pouvait pas avoir lieux en même temps que celle-ci. En effet, les requêtes en \gls{JCMS} sont définies par l'utilisateur au niveau d'une interface et ce qui est développé est l'affichage de ces résultats.\par
\begin{figure}[h!]
\centering\includegraphics[scale=0.8]{images/breve_bandeau.jpg} 
\caption{Bandeau sur la page d'accueil}
\end{figure}

\subsubsection{Adaptation des lanceurs sur mobile et tablette}
L'un des objectifs principaux du projet était d'avoir un site web adaptatif, c'est à dire que l'interface doit s'adapter automatiquement à la taille de l'écran sur lequel il est visualisé. Le but d'avoir un site web adaptatif est d'éviter la multiplication des pages selon le format d'affichage, mais d'avoir une seule page. Par exemple, lorsqu'un article est affiché sur un ordinateur ou sur un mobile, c'est la même page qui doit être appelée. Cependant l'interface n'est pas la même, il se peut que des éléments soit modifiés, ajoutés ou supprimés.\par 
Ces modifications sont le plus généralement décrites en CSS à l'aide des \textit{media queries} introduites par le CSS3. Pour se faire il suffit d'avoir des propriétés de style différentes d'une même classe ou d'un même identifiant, et de préciser à l'aide des \textit{media queries} celles qui doivent être utilisées selon la taille de l'écran. D'autre modifications plus spécifiques peuvent être apportées au niveau du serveur. Cela permet de sélectionner la partie de code qui va être exécutée selon l'environnement.\par
\medskip
L'utilisation de Bootstrap permet de faciliter la création de site internet adaptatif, car celui-ci contient des classes utilisant les \textit{média queries}. De plus, les classes sont basées sur un affichage en grille, la taille d'un élément ne dépend pas d'une taille donné en pixel mais en pourcentage. La grille permet d'afficher 12 éléments par ligne. Il y a donc 12 choix de largeur pour un élément. Par exemple, un élément ayant une largeur de taille 4 et un autre de taille 8 seront placés côte à côte, alors que deux éléments ayant une largeur de taille 12 seront l'un au dessous de l'autre. La force de Bootstrap réside dans le fait que l'on peut préciser une largeur différente selon la taille de l'écran. Par défaut Bootstrap propose 4 résolutions d'écran :
\begin{itemize}
\item mobile (largeur strictement inférieure à 768 pixels),
\item tablette (largeur supérieur ou égale à 768 pixels),
\item écran médium (largeur supérieur ou égale à 992 pixels),
\item écran large (largeur supérieur ou égale à 1200 pixels).
\end{itemize}
Les deux dernières tailles correspondent aux ordinateur (portable et fixe). Pour les mobiles, bien que leur résolutions soit plus importante que 768 pixels, en réalité les éléments affichés à l'écran sont deux à trois fois plus défini et non pas deux à trois fois plus grand. De ce fait un mobile avec une résolution de 1920 par 1080 pixels affichera les éléments en 414 par 736 pixels avec une définition de l'ordre de 3. Mais un problème se pose en ce qui concerne les tablettes, en mode portrait elle sont reconnues comme des tablettes par Bootstrap, cependant en mode paysage elles sont reconnues comme des écrans médium. Un site peut donc être vu de deux manières différentes selon l'orientation dans laquelle est la tablette.\par
\bigskip
L'ancien site creditagricole.info était en deux versions : la version mobile, accessible à l'adresse m.creditagricole.info, et la version bureau. Sur le nouveau site, les deux versions étaient maintenues, mais accessibles à la même adresse. Le départage se faisant grâce au caractère adaptatif du site. Cependant le découpage était fait de manière à ce que le site mobile soit utilisé sur les mobiles et tablette. Donc selon l'orientation de la tablette on avait un site mobile ou un site bureau. Le travail proposé était d'adapter le site bureau pour une tablette, afin que la version mobile soit réservée aux mobiles.\par
Ce travail nécessitait de revoir une partie du site, la tablette ayant en effet une moindre largeur qu'un écran d'ordinateur. Toutes les pages présentant un seul contenu étaient adaptées pour un affichage sur tablette. Cependant les pages de lanceur étaient basées sur un modèle avec 3 colonnes, qui ne tenait pas sur un affichage tablette. La solution à cela était de les placer sur 2 colonnes sur les tablettes et 3 colonnes sur le site bureau. Mais le système de grille étant déjà en place rendait ce comportement impossible, il était basé sur :
\begin{itemize}
\item plusieurs lignes composées de 3 rectangles (de taille 4) chacun,
\item ces rectangles contenaient un aperçu d'un contenu
\item l'aperçu du contenu qui était généralement composé du titre ainsi que d'un visuel, avec parfois un chapeau,
\end{itemize}
Cette disposition était parfaite pour afficher 3 aperçus de contenu côte à côte, mais lorsque que l'on réduisait la fenêtre pour simuler le comportement sur tablette le rendu donnait : deux contenus côte à côte avec le troisième en dessous ainsi qu'un espace blanc, et ceci sur chaque "ligne". Le nouveau système mis en place enlevait ces lignes et était basé sur le comportement par défaut de Bootstrap, qui était de mettre le contenu qui ne rentre pas sur la ligne suivante. Au final il ne restait qu'une seule ligne avec des rectangles de taille 4 sur la version bureau et de taille 6 sur tablette. En se basant sur le comportement par défaut de Bootstrap, sur la version bureau, les aperçus étaient affichés 3 par 3 et sur les tablettes deux par deux. Le visiteur n'était donc plus perturbé par le changement entre la version bureau en mode paysage et la version tablette en mode portrait.\par
\medskip
Lors du passage de plusieurs ligne à une seule, un problème graphique apparut. Les rectangles d'aperçu se plaçaient mal. En effet, comme avant le système était basé sur plusieurs lignes, il n'était plus nécessaire de préciser une hauteur aux aperçus, puisque c'était la hauteur de la ligne qui était importante. Celle-ci était calculée par le navigateur, en prenant la hauteur de l'aperçu le plus haut qui la compose. Mais avec une seule ligne le navigateur plaçait les blocs d'aperçu où il y avait de la place, cela entrainait des décalages avec des espaces blancs. Ce problème a été réglé en précisant une hauteur pour tous les blocs d'aperçu.\par 
\bigskip
Après avoir adapté les lanceurs du site bureau à un usage sur tablette, le travail proposé était de les adapter aussi à une utilisation sur le site mobile. Comme pour les tablettes, Bootstrap adapte automatiquement l'affichage. Sur mobile, un lanceur est sous forme de liste où l'aperçu prend toute la largeur. Comme sur les versions bureau et tablette, on retrouve dans l'aperçu une image ainsi que le titre, cependant le chapeau a été retiré. Cette affichage permet se rapprocher d'une interface d'une application mobile native.\par


\begin{figure}[h!]
\centering\includegraphics[scale=0.6]{images/responsive.jpg} 
\caption{Adaptation sur bureau, tablette et mobile de l'affichage sur 3 colonnes}
\end{figure}
\newpage
\subsubsection{Navigation au sein d'un dossier sur un mobile et tablette}
Ce travail consistait à réfléchir et proposer un moyen plus simple de naviguer au sein d'un dossier sur mobile et tablette. Pour rappel, un dossier est constitué d'un ensemble d'articles. Comme chaque contenu, un dossier peut être lié à d'autre types de contenu, généralement des vidéos, dossiers ou articles. La navigation au sein du dossier, sur la version bureau, se fait à l'aide d'une liste de liens qui se trouve à gauche de l'article ouvert. Dans la même colonne, plus bas, se trouvent les liens vers les contenus liés. Le problème est que sur mobile cette colonne apparait au dessus de l'article ouvert. Le visiteur en arrivant sur un dossier voit en premier lieu le menu du dossier et non pas son contenu. Il faut donc trouver un moyen de naviguer au sein d'un dossier tout en prenant compte de la taille réduite des écrans de mobile.\par
La première solution proposée fut d'utiliser des flèches de navigation. Ces flèches seront placées en dessous de l'article ouvert, ce qui permettra au visiteur de les voir en arrivant sur la page l'article du dossier. De plus, elles n'apparaitront que si nécessaire, par exemple sur le premier article du dossier il n'y aura pas la flèche vers le précédent article, de même pour le dernier article. À cela, s'ajoute un indicateur de position dans le titre du dossier pour pouvoir se repérer, mais aussi pour indiquer au lecteur qu'il y a une suite, et que le dossier ne se résume pas à un article. Il se place en fin de titre et indique la position de l'article ouvert par rapport à tous les articles du dossier, par exemple dans un dossier contenant 5 articles, si le lecteur est en train de lire le 3ème article du dossier, à coté du titre du dossier sera affiché "(3/5)".\\
L'avantage de cette solution était qu'elle était optimale pour les mobiles, mais elle présentait plusieurs désavantages :
\begin{itemize}
\item pas d'accès direct à un article spécifique du dossier,
\item pas de vision globale de l'ensemble des articles du dossier,
\item l'interface est adaptée uniquement aux mobiles et pas adaptée aux tablettes.
\end{itemize}\par
Pour palier à ces problèmes, une seconde solution fut proposée : en plus des flèches de navigation, un menu déroulant viendrait se placer entre les flèches et permettrait un accès direct à un article du dossier. La difficulté dans cette solution fut de trouver les bonnes dimensions afin que des flèches ne soient pas trop petites ou que le menu déroulant ne soit pas trop petit non plus. En ce qui concerne les tablettes, en mode portrait elles bénéficient de la même navigation que celle pour le mobile, mais elles ont en plus des indications "Article suivant" et "Article précédent" au niveau des flèches de navigation. De plus, afin de retrouver l'esprit du mode bureau sur la tablette, l'image du dossier affichée en haut des autres articles se retrouve au dessus de la liste déroulante sur la version tablette. En mode paysage, les tablettes garderaient la version bureau du site, de ce fait sur tablette les dossiers disposent de deux présentations différentes selon l'orientation dans laquelle on tient la tablette.\par
Cependant, cette solution ne fut pas retenue pour la version finale du site. L'interface était trop différente de ce que proposait le site en version bureau. Seulement au lieu de retourner comme au début, l'idée que le menu soit placé au dessous de l'article fut gardée, ainsi que l'image pour les tablettes. Au final, la navigation au sein d'un dossier se fait au travers d'une liste de liens qui se situent en dessous de l'article ouvert. Les contenus liés ne sont pas affichés ni sur le mobile, ni sur les tablettes en mode portrait.\par

\begin{figure}[h!]
\centering\includegraphics[scale=0.6]{images/dossier_mobile.jpg} 
\caption{Dernière proposition de navigation sur mobile et tablette qui n'a pas été retenue}
\end{figure}

\newpage
\subsubsection{Migration de divers pages}
Le travail proposé était de migrer plusieurs pages, c'est à dire les adapter à la nouvelle charte graphique et les adapter à une navigation sur mobile. De petites modifications ont été apportées à ces pages, c'est pour cela qu'elles sont regroupées en une seule partie.\par 
\bigskip
La première page à avoir été retravaillée fut la page de fiche de présentation d'une Caisse régionale. Chaque Caisse régionale dispose d'une fiche de présentation sur le site internet. Sur cette fiche on retrouve les coordonnées, les principales informations, ainsi que les actualités relatives à la Caisse.\par 
La tâche ne concernait pas que le site mobile mais aussi la version bureau. Lors de la migration, la page n'a pas été retravaillée. L'organisation de la page a été revue et les éléments on été adaptés à Bootstrap.\par 
\bigskip
Quelques portlets concernant l'affichage de cartes ont du être adaptées à une navigation sur mobile. Sur la version bureau, ces portlets étaient composées d'une carte et d'une liste d'éléments affichés sur la carte à gauche de celle-ci. Le but était de ne pas afficher cette liste sur mobile.\par 
La difficulté de cette tâche a été de comprendre tous les fichiers relatifs à l'implémentation de l'API de Google Maps. Les fichiers ont très peu évolué lors de la migration et certaines configurations étaient obsolètes. Ce travail permit le nettoyage du code dans le but de supprimer des éléments de configuration inutiles.\par
\bigskip
Les pages de flux RSS ont également été migrées. Bien que les flux RSS sont de moins en moins utilisés sur internet, ils sont encore très utilisés au sein de l'entreprise. Les navigateurs n'affichent pas les flux RSS de la même manière, il y a ceux qui affiche le flux dans une interface adaptée, et d'autre qui l'affiche avec une feuille de style, quand elle est donnée, sinon ils affichent une page XML.\par 
Les flux RSS générés par le site ne contenaient pas de feuille de style. Le tâche était donc d'associer une feuille de style aux flux.\par

\subsubsection{Tests d'intégration continu}
L'entreprise disposait de \gls{JADE} comme plateforme d'intégration. Elle permet d'effectuer les tests de chaque module, cependant les modules ne contenaient aucun fichier de test. La plupart d'entre eux n'en n'avaient pas besoin car il ne contenait pas de classes. Le seul module qui contenait une classe était le module FNCAPlugin, qui était \textit{FNCAUtils}. Le travail proposé était donc de faire une classe afin de tester les fonction de la classe \textit{FNCAUtils}.\par
Pour faire une classe de test, Jalios met a disposition une classe, \textit{JcmsTestCase}, dont il faut hériter. Cette classe permet de mettre en place un environnement de test, avec un store et des configurations spéciales. De ce fait, il est possible de lancer les tests directement depuis Eclipse, qui se chargera de démarrer l'application \gls{JCMS}.\par
Toutes les fonctions de la classe \textit{FNCAUtils} ne pouvaient pas être testées. En effet, certaines fonction était spécifique à un élément, qui ne pouvait pas être recrée simplement dans un environnement de test.\par 

\newpage
\subsubsection{Fil Twitter}
Sur les maquettes de la page d'accueil, il apparaissait deux vignettes côte à côte qui serviraient à afficher de la publicité ou des informations à propos des offres du Crédit Agricole. Le responsable proposa de remplacer une vignette par un fil d'actualité Twitter. Ce fil Twitter regrouperai les tweets de toutes les Caisses régionales et certainse autre entités du Crédit Agricole, mais ne remonterai pas les tweets du compte de la Fédération Nationale du Crédit Agricole. En effet, la plupart des tweets de la FNCA renvoie vers le site creditagricole.info et il serait redondant de retrouver les tweets concernant les nouveaux contenus du site sur la page d'accueil. La tâche confiée était d'essayer d'intégrer ce fil de tweet.\par
\medskip
Avant tout développement, il fallait se renseigner sur la manière d'intégrer un fil de tweet au sein d'une page. Pour aider l'intégration Twitter propose un site internet dédié au développeur où on trouve toute la documentation nécessaire sur les APIs et les modules de Twitter. Afin de créer un fil de tweet, il faut au préalable créer une liste de comptes. Cette liste va constituer l'ensemble des comptes dont les tweets vont apparaitre dans le fil. Après avoir choisi la liste il suffit d'ajouter le code fourni dans la documentation à l'endroit où le fil Twitter va apparaitre sur la page.\par
\medskip
Au cours de l'intégration, un problème de taille s'est présenté, une vignette faisait 200 pixels de hauteur et le fil Twitter est obligatoirement composé d'un bandeau informant la nom de la liste de tweet, ce bandeau occupait quasiment toute la hauteur disponible. Plusieurs maquettes de divers assemblages fut proposées, et une seule fut retenue. Sur la maquette retenue les deux vignettes restent, elles sont l'une au dessus de l'autre au d'être côte à côte, le fil Twitter se place à droite des vignettes et ainsi garde la largeur initiale. De cette manière le fil Twitter dispose de plus de 400 pixels de hauteur et peut donc être affiché en présentant environ 3 tweets.\par 

\begin{figure}[h!]
\centering\includegraphics[scale=0.7]{images/twitter.jpg} 
\caption{Le fil twitter avant et après intégration}
\end{figure}
\newpage
\subsubsection{Uniformisation de la page des brèves}
A deux semaines de la livraison finale, une réunion a eu lieu dans le but de vérifier l'uniformisation du site. Comme cela a été expliqué, le cahier fonctionnel ainsi que la carte graphique étaient incomplets. De ce fait certaines pages ont pu bénéficier de nouvelles fonctionnalités, cependant leur aspect n'était pas forcément très bien intégré à celui du site. Au cours de cette réunion, l'aspect général d'une page d'un contenu fut dressé, et elle est divisée en 3 parties :
\begin{itemize}
\item le contenu (article, vidéo,...)
\item une colonne à côté du contenu listant d'autres contenus liés à l'article (sur le même thème ou dans la même région) ; dans le cas des dossiers il contient la liste des articles du dossier,
\item un lanceur vers d'autres contenus du même type, situé en dessous des deux parties précédentes, afin d'inciter à rester sur le site.
\end{itemize}\par
La colonne listant le contenu lié est placée à droite ou à gauche du contenu, cela dépend de la catégorie du  contenu. Pour les articles, vidéos et brèves, qui sont dans la catégorie "L'actualité", la colonne est à droite du contenu, et pour les dossiers et rendez-vous expert, qui sont dans la catégorie "Les analyses", la colonne est à gauche.\par
\bigskip
Or la page des brèves ne respectait pas cet aspect. La page était composée d'une seule des 3 parties nécessaires : la partie lanceur. De plus, même si la première brève était ouverte et aurait pu correspondre à la partie contenu,  il manquait la partie qui envoie vers d'autres contenus.\par 
Même si un modèle persistait, il y avait deux manières d'accéder à un contenu à partir du menu : 
\begin{itemize}
\item on accède à une page de lanceur qui liste un ou plusieurs type, celui-ci renvoi vers la page de contenu avec l'aspect vu précédemment. Cet accès est utilisé pour les types articles et dossier,
\item la seconde manière permet d'accéder directement à l'aspect vu précédemment. Dans ce cas l'accès au contenu est plus rapide, il est utilisé pour les vidéos. 
\end{itemize}\par 
En ce qui concerne la page des brèves, la seconde solution fut celle adopté. Ce qui avait motivé en premier lieu la liste en accordéon c'était l'accès rapide aux brèves. Mais un aspect graphique fut emprunté au modèle des pages lanceurs, l'image en fond.\par 
\medskip
En résumé, la page de brève serait organisée de manière à avoir une brève ouverte, avec une colonne à droite, afin de voir le contenu lié. En dessous de cette brève se trouve le lanceur en accordéon, celui-ci permet de voir les brèves mais pas leur contenu lié. Pour voir le contenu lié, il faut ouvrir la brève, ce qui va conduire remplacer la 1ère brève, ouverte, par celle-ci.\par
De plus cette nouvelle organisation permet de partager à nouveau une brève sur les réseaux sociaux. La brève ouverte peut être partagée sur les réseaux sociaux. En effet la condition pour partager un contenu était d'avoir une page spécifique pour celui-ci. Ainsi, les balises de renseignement sur le contenu peuvent être intégrées à la page.\par 
Bien que le partage était de nouveau disponible pou les brèves, il était difficile d'accès. Pour partager une brève qui aura été lue dans le lanceur, il faudra d'abord l'ouvrir afin qu'elle devienne la brève principale et, enfin elle pourra être partagée. Dans cette organisation il y avait un clic et un chargement de page en trop.\par 
La solution serait de pouvoir partager une brève directement depuis le lanceur. Cependant, la solution d'AddThis montre ses limites, elle ne permet pas de partager plusieurs contenus différents au sein d'une même page. Il a donc été décidé de ne pas utiliser AddThis pour les brèves qui sont dans le lanceur mais de faire un développement spécifique. Les boutons de partage ne partageraie,t pas l'URL de la page actuelle mais plutôt celle de la brève "ouverte". Cependant en utilisant une autre solution, les avantages d'AddThis tel que la personnalisation des liens ou l'outil de statistique ne seront pas disponible.\par

\begin{figure}[h!]
\centering\includegraphics[scale=0.5]{images/breve_final.jpg} 
\caption{La page des brèves tel qu'elle est actuellement sur le site}
\end{figure}

\bigskip
Après la mise en production du site, un bogue est apparu au niveau de cette page. Le comportement par défaut de la page était de ne pas ré-afficher la brève principale dans le lanceur en dessous. Cependant, sur le serveur de production, ce comportement n'était pas reproduit et la brève principale était affichée aussi dans le lanceur.\par 
La partie où la brève principale est affichée et la partie lanceur sont dans deux JSP différentes. Pour communiquer des informations entre les deux JSP il n'est pas possible de passer par la page qui les contient, car elle est générique. La communication entre les deux JSP se faisait alors à l'aide de variables de \gls{JCMS} relative à la page, et donc communes aux deux JSP.\par 
Le problème était qu'en production, il y avait des optimisations qui étaient faites, comme la compression des pages HTML et l'optimisation du javascript. Après avoir activé une à une les optimisations sur le site en local, le problème a pu être isolé, il y avait de l'interférence entre l'optimisation du javascript et les variables relatives à la page.\par 
Le problème a été signalé à Jalios pour qu'il puisse le corriger dans la prochaine version de \gls{JCMS} 9.\par

\newpage
\subsubsection{Cookies}
Afin de pouvoir suive l'évolution des visites sur le site et avoir diverses informations concernant les visiteurs, le site utilise des outils de suivi tel que Xiti et Google Analytics. Pour collecter les données, ces outils utilisent des cookies qui permettent de stocker des informations sur le terminal de l'utilisateur. Une directive de l'Union Européenne datant de 2009, transposé par une ordonnace dans la législation française en août 2011, oblige les sites internet utilisant les cookies, dans le but de recueillir des informations sur les utilisateurs, doivent les en informer. De plus depuis décembre 2013, afin de faciliter son adoption, la CNIL a émis une recommandation relative à la directive. L'entreprise a choisi de se conformer à cette obligation avec la refonte du site.\par 
Le travail proposé était donc d'inclure un message informant l'utilisateur sur l'utilisation des cookies. La CNIL propose deux solutions dans leur recommandation, qui se font au travers de bandeau sur la page :
\begin{itemize}
\item la première solution consiste à simplement informer l'utilisateur de l'utilisation de cookies, et qu'il accepte l'utilisation de ceux-ci en continuant sa navigation sur le site,
\item la seconde solution bloque l'utilisation des cookies et demande à l'utilisateur son accord avant d'en déposer. Si l'utilisateur refuse, les cookies, servant à recueillir des informations sur l'utilisateur, doivent être bloqués.
\end{itemize}\par 
Quelle que soit la solution choisie, le message ou le choix de l'utilisateur peut être sauvegardé, sous forme de cookie, durant un période de maximum 13 mois.\par 
\bigskip
L'entreprise a décidé de mettre en place la première solution. Pour ce faire, un message sera placé en bas à droite de la fenêtre, sous forme de pop-up, lors d'une première visite sur le site et restera affiché tant que l'utilisateur n'aura pas fermé la pop-up. Cette pop-up est discrète et permet au visiteur de naviguer à travers le site sans devoir la fermer. Il a été décidé de sauvegarder le cookie 13 mois afin d'éviter que le message n'apparaissent trop souvent.\par 
Sur son site, la CNIL propose des exemples de code pour la gestion de l'affichage du bandeau. Ce code était en Javascript, et a pu être facilement intégré au site internet. Afin que la bandeau puisse apparaitre sur toutes les pages du site, le code devait être placé à un endroit où il serait constamment appelé. Au sein de \gls{JCMS} cela se traduit par la création d'une JSP qui sera appelée juste avant l'appel du \textit{Footer} qui contient une partie du Javascript de la page.\par

\subsubsection{Mise en production et premiers retours}
Afin de préparer la mise en production du site, un serveur de pré-production fut mis en place quelques semaines avant la mise en production. Ce serveur permettait de faire les derniers tests avec une base de donnée semblable à celle en production. Il a aussi notamment servi à faire des tests sur la version mobile.\par 
En effet il était impossible d'accéder aux serveurs de tests depuis un mobile, cependant cela a été rendu possible avec le serveur de pré-production. Le serveur deviendra la serveur de production à la date de lancement du site. Contrairement aux serveurs de tests, l'équipe de développement n'avait pas directement accès aux serveurs et devait passer par la DSI pou déposer de nouveaux fichiers.\par 
\bigskip
La date de mise en ligne du site, initialement prévue le 4 novembre 2014, a été repoussé au 12 novembre car la période depont n'était pas propice et la communication n'avait pas été anticipée sur la mise en ligne du site. Le retard d'une semaine a permis de rectifier le tir et la communication autour de la nouvelle version fut en place la semaine du 4 novembre.\par
Le site a été mis en ligne, comme prévu, le 12 novembre. Il n'y a pas eu de problème majeur lors de la mise en ligne, seulement quelques identifiants qui n'ont pas été mis à jour provoquant une absence de statistiques durant les jours qui ont suivit.\par 
Il y a eu dès la mise en ligne des retours sur la version mobile :
\begin{itemize}
\item les vignettes dans les lanceurs étaient dégradées et trop petites,
\item la police utilisés prenait trop de temps à charger, notamment dans le menu,
\item le menu recouvre le contenu une fois ouvert et dans le cas d'écran trop petit il ne s'affichait pas entièrement avec aucune possibilité de scroller.
\end{itemize}
Le travail proposé fut de corriger ces problèmes, afin d'améliorer la navigation sur mobile.

\subsubsection{Images des contenus sur le site}
Le problème avec les images était leur mauvaise qualité sur mobile et en général sur les miniatures. La source de ce problème est une fonctionnalité de \gls{JCMS} qui permet de déposer une grande image sur le site, puis il s'occupe de créer des images au bon format lorsqu'elle est appelée. Par exemple, une image de 1920 par 1080 pixels est déposée sur le site, dans une page elle est affichée en 640 par 360 pixels, lors de l'appel, \gls{JCMS} va créer une image réduite en plus de celle originale. Cependant, lors de cette création l'image va perdre en qualité.\par
\medskip
La perte de qualité est accentuée par le fait que sur mobile, les éléments sont mieux définis et lorsque qu'une image n'est pas adaptée à cette définition, elle est légèrement pixelisée. Pour palier à ce problème une solution fut proposée, demander à \gls{JCMS} des images deux fois plus grandes que celles qui seront affichées. Ce procédé permet d'avoir une image mieux définie, et sur les mobiles elle apparait nette. Cependant, cette solution présente un défaut, comme les images sont deux fois plus grandes, elles sont plus lourdes mais dans une moindre proportion, cela reste donc acceptable.\par
De plus sur mobile les images pour les aperçus dans les lanceurs étaient trop petites. Elles ont donc été agrandies en passant d'une taille de 100 par 55 pixels à 130 par 74 pixels, mais comme les images sont deux fois plus grandes que l'espace pour les afficher, ils faisaient 260 par 148 pixels.\par 
De même, ce procédé a été réutilisé pour le site en version bureau/tablette, mais seulement sur les lanceurs. Sur ces versions ce procédé permet d'économiser un peu de bande passante, parce que les images qui sont affichées dans les lanceurs ont la même définition que celles qui sont affichées dans un contenu, il n'y a donc plus besoin de charger une nouvelle image entre le lanceur et le contenu. Pour les autres images, par exemple celle du contenu, leur taille est proche de l'original, de ce fait il n'y a pas de perte de qualité, et donc pas de nécessité à charger des images deux fois plus grandes que celles qui seront affichées. De plus cela conduirait à travailler avec de trop grandes images, de l'ordre de 1200 par 650 pixels.\par

\subsubsection{Menu sur mobile}
Bien qu'il avait un bon rendu en local, le menu sur mobile était inutilisable en production. Ce problème avait un importance haute, du fait qu'il nuisait à la navigation sur le site mobile. Même si ce sont les éléments de Bootstrap qui ont été utilisés, certain choix ont fait que le menu était inutilisable : 
\begin{itemize}
\item comme dit précédemment, la police prenait trop de temps à charger et à s'afficher. Entre le moment où le menu était ouvert et le moment où la police s'affichait il y avait un délais d'au moins 5 secondes,
\item la gestion des sous menu n'était pas optimal. Le menu du site est composé de catégories, et ces catégorie disposait d'un sous menu qui s'ouvrait lorsque l'on cliquait sur la catégorie,
\item le scroll était impossible dans le menu, et il pouvait arrivé d'avoir un sous menu qui dépassait de l'écran,
\item impossible de savoir si on avait cliqué sur le bon menu, car la taille du texte était petite et à part le chargement de page rien n'indiquait que la clic a bien été fait.
\end{itemize}\par 

\begin{figure}[h!]
\centering\includegraphics[scale=0.5]{images/menu_mbug.jpg} 
\caption{Le menu sur mobile tel qui doit apparaitre et avec le bogue}
\end{figure}

Plusieurs propositions ont été faite afin de trouver une solution aux problèmes. La première chose qui fut modifier dans le menu fut la police. Le site creditagricole.info utilise une police spécial pour les titres et les menus, cette police n'est pas une police standard du web. De ce fait pour s'afficher sur le site elle est d'abord téléchargé par le navigateur et chargé à la volée. Cependant, sur mobile ce téléchargement et ce chargement à la volée prennent plus de temps, la connexion et le processeur étant plus lent sur mobile que sur un ordinateur. Plusieurs polices standards du web, elles sont reconnue par tous les navigateurs, ont été testés, et finalement la police Verdana a été retenu.\par
\medskip
Une première version fut proposé. Contrairement à celle qui était en ligne, la barre de navigation, qui donne accès au menu, était en haut de la page et non plus fixé en haut de la fenêtre. Quand le menu était ouvert, il ne chevauchais plus la page mais comme il est en haut pousse celle-ci. De cette manière il est possible de scroller dans le menu. Cependant, comme il n'était plus fixe le seul moyen d'avoir accès au menu était de remonter tout en haut de la page. En plus d'avoir été changé, la police a été grossie pour permettre de ne plus se trompé lors du clic. Même si la navigation au sein du menu était amélioré, la navigation dans les sous menu n'avait pas changé et le fait de devoir remonter en haut de la page pour accéder au menu était pénible.\par
\medskip
Le seconde version mettait l'accent sur la navigation dans les sous menus. Ce qui a été proposé était afficher le contenu de out les sous menu, ainsi pour arriver à un élément du sous menu il y avait moins de clic. Bien sur, la taille des sous menu n'était pas importante et la quasiment tout le menu tenait sur l'écran sans devoir scroller. De plus afin d'améliorer la visibilité, les catégories sont en gras et les éléments sont légèrement décaler vers la droite. Aussi, chaque élément est délimité par une bordure fine, comme ce qui se fait dans les application native sur mobile, et afin de bien voir la différence entre catégorie et élément du sous menu, ils auront des couleurs différentes. Une fois que l'on clique sur un élément sa couleur de fond change pour montrer à l'utilisateur qu'il a bien cliqué et où il avait cliqué.\par
La deuxième version réglait les problèmes de navigation dans les sous menu, cependant, la barre de menu reste en haut de la page. Le problème est que si la barre de menu est de nouveau fixé en haut de la fenêtre, il n'est plus possible de scroller dans le menu. Le menu faisant partie de la barre de navigation, il se retrouverai lui aussi fixé.\par
\medskip
La troisième version a essayé d'apporter une solution à ce problème. Pour cela il fallait dissocier la barre de menu du menu lui même, de ce fait il sera possible de scroller dans la menu. Cependant, avec le système en place, le menu qui s'ouvre en accordéon, un rendu avec un menu qui scroll ne serai pas ergonomique. Il fut proposé de mettre en place un menu, sous forme de panneaux, qui ne prendrai pas toute la largeur. Ce type de menu est utilisé dans la plupart des applications mobiles natives.\par
La mise en place du nouveau menu fut délicate. En effet, le menu en place utilisait les classes de Bootstrap. Il fallait donc garder le comportement par défaut de Bootstrap pour le version bureau, et forcer un autre comportement sur mobile. Le premier rendu était proche du comportement d'un menu d'une application native, celui-ci s'ouvrait en poussant la page vers la droite. Cependant, il présentait un défaut majeur, une fois ouvert la partie de la page, décalé à droite, qui devait être caché parce quelle était hors de l'écran tait toujours accessible par un scroll horizontal. Pour palier ce problème un second rendu fut proposé avec le menu qui en s'ouvrant ne pousse plus page mais la chevauche. La largeur de la page ne change pas une fois le menu ouvert.\par 
Cette troisième version fut retenu pour une mise en ligne.

\begin{figure}[h!]
\centering\includegraphics[scale=0.5]{images/menu_new.jpg} 
\caption{Le menu mobile final}
\end{figure}

\subsubsection{Icône pour mobile}
Les systèmes d'exploitation mobile permettent mettre un lien vers un site internet directement sur l'écran l'accueil, sous forme d'icône. Il a donc été proposer de rajouter le code nécessaire pour avoir une icône personnalisé. Après avoir parcourut la documentation mis à disposition par Apple et Google, l'ajout d'une icône personnalisé se fait à l'aide d'une balise \textit{meta} qui se situe dans le \textit{header}. Pour une intégration parfaite sur iOS, il faudra 4 tailles d'icône :
\begin{itemize}
\item une de 60x60 pixels pour les iPhones,
\item une de 120x120 pixels pour les iPhones rétina,
\item une de 76x76 pixels pour les iPads,
\item une de 154x154 pixels pour les iPads rétina.
\end{itemize}
Android est compatible avec la solution d'Apple et ne requière pas de développement en plus.

\subsubsection{Migration de Mantis}
L'entreprise dispose de plusieurs serveurs de test pour le site creditagricole.info, mais elle dispose aussi de serveurs pour d'autre usages. L'applicatif de suivi de bogue Mantis est hébergé sur l'un de ces serveurs. Dans un soucis de réaffectation des serveurs, l'applicatif léger, qui avait un serveur dédier, sera déplacé sur le serveur de test 2 du site (TST2). Le travail proposé était d'assurer cette migration et de documenter chaque étapes, afin e pouvoir effectuer une migration dans le futur, si nécessaire.\par 
Avant de faire la migration, il était important de vérifier que le serveur destinataire disposait des programmes nécessaire au bon fonctionnement de l'applicatif. Les deux serveurs disposait du même système d'exploitation Windows Server 2008, et tout deux disposaient du programme Internet Information Service (IIS), qui fait office de serveur web. Cependant sur le serveur de destination, il manquait PHP et MySQL qui sont nécessaire au fonctionnement de l'application. Cependant, comme le serveur de destination était un serveur de test à usage interne, il n'était pas nécessaire d'installer les versions les plus récentes de ces programmes, mais celle qui étaient compatible.\par 
Après avoir installé les programmes nécessaire, et avant de migrer l'applicatif, il a été testé qu'un applicatif vierge pouvait fonctionner sur le serveur. Une fois le test effectué, la base de donnée pouvait être migré sur le serveur de destination. Ensuite, au lieux de re-copier tout l'applicatif du serveur source au serveur destinataire, il fut décider de garder l'applicatif qui fut installé pour les tests, et d'importer uniquement les fichiers de configurations.\par 
Durant la migration de rapport de nouveaux bogues a été stoppé, pour évité qu'il ne soit pas migré. A la fin de celle-ci, la nouvelle adresse fut communiqué à tous les utilisateurs de l'applicatif et l'applicatif qui était sur le serveur source fut arrêter, pour prévenir de rapporter un bogue sur le mauvais serveur.\par

\subsubsection{Module évènementiel}
Avant la migration, le site était composé d'un module évènementiel. Ce module sert à mettre en avant un message par le biais d'une portlet, qui s'affiche sous forme de pop-up sur la page d'accueil. Il est utilisé pour les grandes occasions, par exemple pour les fêtes de fin d'années ou pour prévenir la mise en ligne du nouveau site, car il empêche toute navigation sur la page d'accueil tant qu'il n'est pas fermé. Une fois fermé, la portlet ne réapparait qu'après une période définie (généralement 12 heures). Ce comportement est possible grâce à l'utilisation de cookies.\par 
Le module avait été développé pour l'ancienne version du site et fonctionnait avec \gls{JCMS} 6. Le travail proposé fut d'adapter ce module pour le nouveau site, donc pour \gls{JCMS} 9. Afin de ne pas faire trainer de vieux morceaux de code, et au vu de la simplicité du module, il fut décidé de re-développer entièrement le module.\par 
Le développement fut rapide du fait de sa similarité avec le bandeau informant l'utilisation de cookies. Cependant, deux questions se posèrent : 
\begin{itemize}
\item Comment centrer la portlet, même après un redimensionnement de la page ?
\item Commet détecter la page d'accueil ?
\end{itemize}\par
Pour centrer un élément, on peu utiliser le CSS, pour cela on le place au centre de la page moins la moitié de sa longueur et se largeur. Le problème ici est que la taille de la portlet n'est pas connue, cela peut être une image, une vidéo ou même un texte. La solution de ce problème était dans l'utilisation du Javascript, grâce à lui, il est possible de récupérer la taille d'un élément sur la page et de définir une nouvelle position pour cet élément.\par 
Au lieu de détecter la page d'accueil, pourquoi ne pas simplement mettre le code nécessaire sur la page d'accueil ? Cela n'est pas possible car le développement doit se faire dans un module, il doit être possible de désactiver sans devoir changer le code de la page d'accueil. Avec \gls{JCMS}, il est possible d'appeler une JSP à la fin du header, afin d'ajouter des balises dans celui-ci, ou avant le footer. Cependant, il n'est pas possible d'appeler une JSP pour une certaine page. La solution proposé à ce problème était d'appeler la JSP qui génère la pop-up avant le footer et détecter dans celle-ci si la page qui était chargé était bien la page d'accueil. Pour détecter la page d'accueil il suffit de vérifier son identifiant. Cette solution n'est pas la plus optimal mais comme il est impossible détecter une page avant qu'elle soit appelé, c'était la meilleur des solutions.\par 
\bigskip
Après avoir vu une animation d'étoiles se déplaçant dans l'univers, il a été proposé de rapatrier le code de cette animation et de le modifier afin d'en faire un effet de neige qui tombe. L'animation était en Javascript et utilisait la balise HTML canvas. Cette balise HTML est utilisé pour avoir des rendus dynamiques d'images, elle permet d'avoir une zone de dessin.\par 
L'effet est un ensemble de rond blanc, des particules, de différentes tailles. Chaque particule a une vitesse de chute qui lui est assigné à sa création, de manière aléatoire. De plus, les particules effectuent des déplacements horizontaux, ils son aussi aléatoire. Lorsqu'une particule touche un des coté (gauche ou droit) de la fenêtre sa trajectoire est inversé horizontalement. Une fois arrivé en bas de la fenêtre, sa position verticale est remise à zéro.\par
Après quelques tests, le rendu était satisfaisant et il fut proposé d'intégrer l'animation au sein du module évènementiel. L'animation sera une option à activer dans les propriétés du module.\par 
Un problème survint lors de test plus poussés sur différents navigateurs, l'animation n'avait pas la même fluidité sur tous les navigateurs. La neige de l'animation, les particules, était de petit rond blanc de différentes tailles. Les navigateurs ne gèrent pas le même nombre de particule à un même niveau de fluidité :
\begin{itemize}
\item 500 particules pour Google Chrome, Safari et Opéra
\item 100 particules pour Internet Explorer,
\item et 10 particules pour Firefox.
\end{itemize}\par 
Plusieurs optimisations ont été effectué afin d'avoir plus de particules gérer par Firefox, mais le problème était que que Firefox gère assez mal le dessin de multiples rond. Il a donc été décidé de ne pas activer l'option sous Firefox et de baisser le nombre de particules sous Internet Explorer.\par 
\medskip
Il a aussi été demandé de supprimer toute dépendance à la bibliothèque JQuery pour l'effet neige. En effet, elle n'est pas utilisé pour gérer la génération et les déplacements des particules, elle servait uniquement à repérer la balise canvas dans le document HTML. De cette manière, l'effet neige pourra être utilisé sur d'autre projet qui ne dispose pas de JQuery, car le chargement d'une bibliothèque demande des ressources, mais surtout de la bande passante.\par

\begin{figure}[h!]
\centering
\includegraphics[scale=0.5]{images/evenementiel.jpg}
\caption{Plugin évènementiel sur le site avec l'effet neige}
\end{figure}

\subsubsection{Flux RSS sur les écrans plasmas}
La Fédération Nationale du Crédit Agricole possède plusieurs écran plasma, au sein de ses locaux, pour diffuser des informations au public et aux employés. Parmi les informations diffusées, on retrouve des actualités du site creditagricole.info.\par 
Pour permettre la diffusion d'information sur les écrans plasmas, l'entreprise utilise une solution développé en interne. Elle permet de contrôler toutes les diffusions sur tous les écrans à partir d'une interface web simple. Pour cela, il faut créer des chaînes, qui contiennent l'information, par exemple une chaine avec la météo. Ces chaînes sont ensuite rassemblés dans des boucles, qui sont ensuite diffusé sur un ou plusieurs écrans. Un écran ne peut diffuser qu'une boucle.\par 
Une chaîne sert à diffuser les actualités du site. Elle crée une animation à partir du flux RSS récupérer sur le site et un feuille de style CSS, qui est stocké au sein du logiciel. Il est possible de choisir une feuille de style personnalisé, du moment qu'elle se trouve dans un répertoire spécial. Le travail proposé consistait à mettre à jour la feuille de style en y apportant certain aspect graphique de la nouvelle version du site.\par 
Un problème se posa au cour du développement, la version du CSS supporté par le logiciel. Le nouvel aspect du site aborde des ombres au niveaux des contours de bloc. Cependant, les ombres autour de bloc est une nouveauté apporté par le CSS3, qui n'est pas forcément disponible au sein du logiciel. La seule manière de savoir la version supporté était de tester, mais le logiciel ne permettait pas d'importer soi même les fichier CSS.\par 
La DSI a été contacté afin de mettre en place le fichier CSS au sein de la solution, cependant l'absence de documentation sur la solution posa problème. Un rendez-vous fut prit avec les développeur de la solution, qui entre temps en avait fait un produit. Le rendez-vous aura lieu après la fin du stage.\par

\subsubsection{Mise en place de Bibliothèques sur l'espace interne}
Après la migration du site internet finie, celle de l'espace interne pouvait commencer. Pour cela, des réunions furent organisé afin de définir les grand axes de cette migration. Un des point d'évolution était la création de Bibliothèques. L'espace interne est composé d'un ensemble de clubs, et certain de ces clubs ne servent uniquement qu'a récupérer des documents au sein gestionnaire de document. L'idée était de faire évoluer ces clubs en bibliothèques, en enlevant toute leurs fonctionnalités sauf celle de partage de documents. Cela permet de bien faire la différence entre les club normaux et ceux qui servent uniquement au partage de documents.\par 
Le travail proposé consistait à appliquer ces modifications à la version actuel de l'espace interne. Il a été décidé d'accompagner le plus possible les utilisateurs dans cette migration en apportant, le plus possible, les fonctionnalités au fur et à mesure. De ce fait, l'utilisateur ne sera pas trop perdu lors de mise en ligne du nouvel espace interne.\par 
La tâche était de crée un nouveau type d'espace de travail, bibliothèque, et de créer un onglet "Bibliothèques" dans le menu. La difficulté de ce travail était de travailler avec la version 6 de \gls{JCMS}, lors de la migration du site internet il n'y avait pas eu besoin de travailler avec une version 6. Il y avait peu de différences technique entre la version 6 et la version 9 de \gls{JCMS}, contrairement à l'aspect, où il y avait de nombreuses différences. De plus le site internet n'utilise pas du tout les espaces de travail, alors que c'est l'essence même de l'espace interne.\par 
Dans un premier temps, afin de ne pas trop perturber l'utilisateur, il a été demandé pour les bibliothèques que ça soit un club qui s'ouvre directement sur la page de partage de documents, au lieu de la page d'actualité. De plus, la page regroupant les club regroupera aussi les bibliothèque sans distinction entre les deux types. Un fois qu'un membre s'inscrit à une bibliothèque, au lieu de l'ajouter au menu club, il ira dans le menu bibliothèque.\par

\subsection{Interprétation et critique des résultats}
\newpage
\section{Conclusion}
\printglossaries
\listoffigures

\end{document}
